@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<div>
    <div>
        <md-checkbox color="primary"
                     [(ngModel)]="place.needpoint">
        need point
        </md-checkbox>
    </div>
    <div *ngIf="place.needpoint" >
        <h1>Unity Imitation</h1>
        
        <div class="form-group">
            <h1>Posttion</h1>
            <form #position="ngForm">
            <md-list>
                <md-list-item>
                 <md-form-field>
                    <input mdInput placeholder="x"
                    name="pos-x"
                    [(ngModel)]="place.pos.x">
                  </md-form-field>
                </md-list-item>
                <md-list-item>
                  <md-form-field>
                    <input mdInput placeholder="y"
                    name="pos-y"
                    [(ngModel)]="place.pos.y">
                  </md-form-field>
                </md-list-item>
                <md-list-item>
                  <md-form-field>
                    <input mdInput placeholder="z"
                    name="pos-z"
                    [(ngModel)]="place.pos.z">
                  </md-form-field>
                </md-list-item>
            </md-list>
            </form>
        </div>
        <div>
            <h1>direction</h1>
            <form #direction="ngForm">
            <md-list>
               <md-list-item>
                <md-input-container>
                  <input mdInput
                  placeholder="x"
                  name="dir-x"
                  [(ngModel)]="place.dir.x">
                </md-input-container>
               </md-list-item>
               <md-list-item>
                <md-input-container>
                  <input mdInput
                  placeholder="y"
                  [(ngModel)]="place.dir.y"
                  name="dir-y">
                </md-input-container>
                </md-list-item>
                <md-list-item>
               <md-input-container>
                  <input mdInput
                  placeholder="z"
                  [(ngModel)]="place.dir.z"
                  name="dir-z">
                </md-input-container>
                </md-list-item>
            </md-list>
            </form>
        </div>
        
    </div>
    <br />
    <div class="btn-group">
        <button class="btn btn-default"  (click)="ChangeMethod(0)" >Новое место</button>
        <button class="btn btn-default" (click)="ChangeMethod(1)">Существующее место</button>
        <button class="btn btn-default" (click)="ChangeMethod(2)">Существующий образец</button>
    </div>
    <div [ngSwitch]="method" >
        <template [ngSwitchCase]="0">
            <div>
                <div id="jstree">

                </div>
                <div>
                <div class="form-group">
                </div>
                    <div class="form-group">
                      <md-checkbox
                      [(ngModel)]="place.needcords"
                      name="needcords"
                      color="primary">
                      Указывать геокоординаты?</md-checkbox>
                    </div>
                    <form *ngIf="place.needcords">
                      <md-list>
                        <md-list-item>
                            <md-form-field>
                                <input mdInput
                                type="number"
                                placeholder="Широта"
                                name="geocords-x"
                                [(ngModel)]="place.geocords.x">
                            </md-form-field>
                        </md-list-item>
                        <md-list-item>
                            <md-form-field>
                                 <input mdInput
                                 type="number"
                                 placeholder="Долгота"
                                 name="geocords-y"
                                 [(ngModel)]="place.geocords.y">
                             </md-form-field>
                        </md-list-item>
                        <md-list-item>
                            <md-form-field>
                                <input mdInput
                                type="number"
                                placeholder="Высота"
                                name="geocords-z"
                                [(ngModel)]="place.geocords.z">
                            </md-form-field>
                        </md-list-item>
                       </md-list>

                    </form>
                </div>
                <image (OnImagesSetted)="OnImageSended()" >

                </image>
                <form #Place="ngForm">

                    <br />
                    <div class="form-group">
                    <md-form-field>
                       <textarea mdInput
                         placeholder="Описание"
                         name="placedescription"
                         [(ngModel)]="place.placedescription">
                         </textarea>
                    </md-form-field>
                    </div>
                    <div class="form-group">
                    <md-checkbox [(ngModel)]="place.sample.physical"
                                  name="sample-physical"
                                 color="primary">
                                 Физическое изъятие?</md-checkbox>
                    </div>

                    <div *ngIf="place.sample.physical">
                        <div class="form-group">
                            <label>Шифр</label>
                            <input type="text" [(ngModel)]="place.sample.Shifr" name="shifr" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label>Дата изъятия</label>
                            <input type="date" [(ngModel)]="place.sample.date" name="date" class="form-control" />
                        </div>
                        <div>
                            <label>Исследователь</label>
                            <select [(ngModel)]="place.sample.personid" name="person">
                                <option *ngFor="let person of persons" value="{{person.id}}">{{person.surname}} {{person.name}}</option>
                            </select>
                        </div>
                        <div>
                            <label>Организация</label>
                            <select [(ngModel)]="currentorgid" name="org" (change)="ChangeOrg()">
                                <option *ngFor="let org of organizations" value="{{org.id}}">{{org.name}}</option>
                            </select>
                        </div>
                        <div>
                            <label>Место хранения</label>
                            <select [(ngModel)]="place.sample.storageid" name="storage">
                                <option *ngFor="let storage of storages" value="{{storage.id}}">{{storage.place}}</option>
                            </select>
                        </div>
                    </div>

                </form>
                <button (click)="SendPlace()" class="btn btn-default">Отправить</button>
            </div>
        </template>
        <template [ngSwitchCase]="1">
            <oldp (OnPlaceSetted)="OnPlaceSetted($event)"></oldp>
            <form #nsample="ngForm" >
                <div class="form-group">
                    <label>Физическое изъятие?</label>
                    <input [(ngModel)]="sample.physical" name="physical" class="form-control" type="checkbox" />
                </div>

                <div *ngIf="sample.physical">
                    <div class="form-group">
                        <label>Шифр</label>
                        <input type="text" [(ngModel)]="sample.shifr" name="shifr" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Дата изъятия</label>
                        <input type="date" [(ngModel)]="sample.date" name="date" class="form-control" />
                    </div>
                    <div>
                        <label>Исследователь</label>
                        <select [(ngModel)]="sample.personid" name="person">
                            <option *ngFor="let person of persons" value="{{person.id}}">{{person.surname}} {{person.name}}</option>
                        </select>
                    </div>
                    <div>
                        <label>Организация</label>
                        <select [(ngModel)]="currentorgid" name="org" (change)="ChangeOrg()">
                            <option *ngFor="let org of organizations" value="{{org.id}}">{{org.name}}</option>
                        </select>
                    </div>
                    <div>
                        <label>Место хранения</label>
                        <select [(ngModel)]="sample.storageid" name="storage">
                            <option *ngFor="let storage of storages" value="{{storage.id}}">{{storage.place}}</option>
                        </select>
                    </div>
                </div>
            </form>
            <button class="btn btn-default" (click)="SetOldPlace()"  >Отправить</button>
        </template>
        <template [ngSwitchCase]="2" >
            <olds (OnSampleSetted)="OnSampleSetted($event)" ></olds>
        </template>
    </div>
</div>